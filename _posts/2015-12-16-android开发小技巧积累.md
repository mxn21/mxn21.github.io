---
layout: post
author: mxn
titile: android开发小技巧积累
category: 技术博文
tag: android
---

### 类安全转换函数

在安卓开发中的类似如下类型转换编辑器不会给出警告和try，catch提示，但是极易引起app崩溃。

      {% highlight java  %}
      String a = "1.333" ;
      int b = Integer.valueOf(a) ; 
      {% endhighlight %}
      
以上代码中如果a含有字符，或者小数就会引起崩溃，正确做法是在工具类中自己写一个转换函数，加入try，catch和默认值处理：

      {% highlight java  %}
 public final static int convertToInt(String value , int defaultValue){
        if(value == null || "".equals(value.trim())){
            return defaultValue ;
        }
        try{
            return Integer.valueOf(value);
        }catch (Exception e){
            try{
                return Double.valueOf(value).intValue() ;
            }catch(Exception e1){
                return defaultValue ;
            }
        }
    }
          {% endhighlight %}
          
          
使用时调用 ：

      {% highlight java  %}
    int b = Utils.convertToInt(a,1) ;
       {% endhighlight %}

<!-- more -->

