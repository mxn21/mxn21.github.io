---
layout: post
author: mxn
titile: DrawingCache解析
category: 技术博文
tag: android
---

在Android的View的设计中有一个cache的概念，这个cache就是一个bitmap对象。利用这个功能可以对整个屏幕视图进行截屏并生成Bitmap，也可以
获得指定的view的Bitmap对象。在有的时候还会影响性能，例如如果自己实现一个Gallery效果,可能就会使用到view缓存。

要获得一个view的bitmap对象涉及到三个方法：setDrawingCacheEnabled、buildDrawingCache和getDrawingCache。所有的View都有这三种方法。
大部分view如果没有设置setDrawingCacheEnabled(true);来启用View的DrawingCache功能的话，那默认是不启用。

启用DrawingCache的话，使用getDrawingCache方法时，会先自动去调用buildDrawingCache方法建立DrawingCache，再将结果返回；
不启用DrawingCache的話，使用getDrawingCache方法時，会返回上一次使用buildDrawingCache方法所产生的结果。
如果在此之前都沒有使用过buildDrawingCache來建立DrawingCache的话，那么getDrawingCache就会返回null。
如果一开始没有启用DrawingCache，也是可以事先使用buildDrawingCache来建立DrawingCache，避免getDrawingCache返回null。

getDrawingCache源码如下：

